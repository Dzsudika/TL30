navigator.serviceWorker.ready
        .then(function (sw) {

            var post = {
                id: new Date().toISOString(),
                title: titleInput.value,
                tags:tagsInput.value,
                file: canvasElement.toDataURL(),
            };
            writeData('sync-posts', post)
                .then(function () {
                    return sw.sync.register('sync-post');
                })
                .then(function () {

                    console.log("sync registered");
                })
                .catch(function (err) {
                    console.log(err);
                });
        });