navigator.serviceWorker.ready
                                .then(function (sw) {
                                    var post = {
                                        id: new Date().toISOString(),
                                        title: titleInput.value,
                                        tags:tagsInput.value,

                                    };
                                    if (canvasElement){
                                        post.file = canvasElement.toDataURL();
                                    }

                                    writeData('sync-posts', post)
                                        .then(function () {
                                            return sw.sync.register('sync-new-posts');
                                        })
                                        .then(function () {
                                            console.log("sync registered");
                                            alert('Your post have been saved into the database for syncing later on!');
                                        })
                                        .catch(function (err) {
                                            console.log(err);
                                        });
                                });